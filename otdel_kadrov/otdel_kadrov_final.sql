-- MySQL Script generated by MySQL Workbench
-- Thu Dec  8 02:25:11 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema otdel_kadrov
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema otdel_kadrov
-- -----------------------------------------------------
drop database otdel_kadrov;
CREATE SCHEMA IF NOT EXISTS `otdel_kadrov` DEFAULT CHARACTER SET utf8 ;
USE `otdel_kadrov` ;

-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Roles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Roles` (
  `id_role` INT NOT NULL AUTO_INCREMENT,
  `role` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_role`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`EmployeeStatus`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`EmployeeStatus` (
  `id_status` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_status`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Positions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Positions` (
  `idPosition` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `vacancies_amount` DECIMAL NOT NULL,
  `working_rate` DECIMAL NOT NULL,
  PRIMARY KEY (`idPosition`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Employees`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Employees` (
  `idEmployees` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `surname` VARCHAR(45) NOT NULL,
  `login` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `id_role` INT NOT NULL,
  `snils` VARCHAR(45) NOT NULL,
  `salary` DECIMAL NOT NULL,
  `id_status` INT NOT NULL,
  `working_hours` DECIMAL NOT NULL,
  `id_position` INT NOT NULL,
  PRIMARY KEY (`idEmployees`),
  INDEX `id_role_idx` (`id_role` ASC) VISIBLE,
  INDEX `id_status_idx` (`id_status` ASC) VISIBLE,
  INDEX `id_position_key_idx` (`id_position` ASC) VISIBLE,
  CONSTRAINT `id_role`
    FOREIGN KEY (`id_role`)
    REFERENCES `otdel_kadrov`.`Roles` (`id_role`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_status`
    FOREIGN KEY (`id_status`)
    REFERENCES `otdel_kadrov`.`EmployeeStatus` (`id_status`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_position_key`
    FOREIGN KEY (`id_position`)
    REFERENCES `otdel_kadrov`.`Positions` (`idPosition`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Candidates`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Candidates` (
  `idCandidates` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `surname` VARCHAR(45) NOT NULL,
  `login` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `snils` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idCandidates`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Requirements`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Requirements` (
  `idRequirement` INT NOT NULL AUTO_INCREMENT,
  `requirement` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idRequirement`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`PositionRequirement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`PositionRequirement` (
  `id_position` INT NOT NULL,
  `id_requirement` INT NOT NULL,
  INDEX `id_position_idx` (`id_position` ASC) VISIBLE,
  INDEX `id_requirement_idx` (`id_requirement` ASC) VISIBLE,
  CONSTRAINT `id_position`
    FOREIGN KEY (`id_position`)
    REFERENCES `otdel_kadrov`.`Positions` (`idPosition`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_requirement`
    FOREIGN KEY (`id_requirement`)
    REFERENCES `otdel_kadrov`.`Requirements` (`idRequirement`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Statutes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Statutes` (
  `idStatutes` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idStatutes`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`ApplicationTypes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`ApplicationTypes` (
  `idApplicationTypes` INT NOT NULL AUTO_INCREMENT,
  `application_type` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idApplicationTypes`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`RegularApplication`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`RegularApplication` (
  `idApplication` INT NOT NULL AUTO_INCREMENT,
  `id_employee` INT NOT NULL,
  `id_status` INT NOT NULL,
  `id_examiner` INT NOT NULL,
  `desription` VARCHAR(45) NOT NULL,
  `id_app_type` INT NOT NULL,
  PRIMARY KEY (`idApplication`),
  INDEX `id_status_idx` (`id_status` ASC) VISIBLE,
  INDEX `id_examiner_idx` (`id_examiner` ASC) VISIBLE,
  INDEX `id_employee_idx` (`id_employee` ASC) VISIBLE,
  INDEX `id_type_idx` (`id_app_type` ASC) VISIBLE,
  CONSTRAINT `id_status_key`
    FOREIGN KEY (`id_status`)
    REFERENCES `otdel_kadrov`.`Statutes` (`idStatutes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_examiner`
    FOREIGN KEY (`id_examiner`)
    REFERENCES `otdel_kadrov`.`Employees` (`idEmployees`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_employee`
    FOREIGN KEY (`id_employee`)
    REFERENCES `otdel_kadrov`.`Employees` (`idEmployees`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_type`
    FOREIGN KEY (`id_app_type`)
    REFERENCES `otdel_kadrov`.`ApplicationTypes` (`idApplicationTypes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`JobApplication`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`JobApplication` (
  `idJobApplication` INT NOT NULL AUTO_INCREMENT,
  `id_candidate` INT NOT NULL,
  `id_status` INT NOT NULL,
  `id_position` INT NOT NULL,
  `id_examiner` INT NOT NULL,
  `description` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idJobApplication`),
  INDEX `id_status_idx` (`id_status` ASC) VISIBLE,
  INDEX `id_position_idx` (`id_position` ASC) VISIBLE,
  INDEX `id_examiner_idx` (`id_examiner` ASC) VISIBLE,
  INDEX `id_candidate_idx` (`id_candidate` ASC) VISIBLE,
  CONSTRAINT `status_id_key`
    FOREIGN KEY (`id_status`)
    REFERENCES `otdel_kadrov`.`Statutes` (`idStatutes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `position_id_key`
    FOREIGN KEY (`id_position`)
    REFERENCES `otdel_kadrov`.`Positions` (`idPosition`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_examiner_key`
    FOREIGN KEY (`id_examiner`)
    REFERENCES `otdel_kadrov`.`Employees` (`idEmployees`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_candidate`
    FOREIGN KEY (`id_candidate`)
    REFERENCES `otdel_kadrov`.`Candidates` (`idCandidates`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`Skills`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`Skills` (
  `idSkills` INT NOT NULL AUTO_INCREMENT,
  `skill` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idSkills`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`PersonSkills`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`PersonSkills` (
  `id_person` INT NOT NULL,
  `id_skill` INT NOT NULL,
  INDEX `id_skill_idx` (`id_skill` ASC) VISIBLE,
  INDEX `id_person_idx` (`id_person` ASC) VISIBLE,
  CONSTRAINT `id_skill`
    FOREIGN KEY (`id_skill`)
    REFERENCES `otdel_kadrov`.`Skills` (`idSkills`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_person`
    FOREIGN KEY (`id_person`)
    REFERENCES `otdel_kadrov`.`Candidates` (`idCandidates`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`ApplicationParams`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`ApplicationParams` (
  `idApplicationRequirements` INT NOT NULL AUTO_INCREMENT,
  `params` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idApplicationRequirements`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`ParamsType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`ParamsType` (
  `id_params` INT NOT NULL,
  `id_type` INT NOT NULL,
  INDEX `id_requirement_idx` (`id_params` ASC) VISIBLE,
  INDEX `id_type_idx` (`id_type` ASC) VISIBLE,
  CONSTRAINT `id_requirement_key`
    FOREIGN KEY (`id_params`)
    REFERENCES `otdel_kadrov`.`ApplicationParams` (`idApplicationRequirements`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_type_key`
    FOREIGN KEY (`id_type`)
    REFERENCES `otdel_kadrov`.`ApplicationTypes` (`idApplicationTypes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `otdel_kadrov`.`ApplicationContent`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `otdel_kadrov`.`ApplicationContent` (
  `id_application` INT NOT NULL AUTO_INCREMENT,
  `id_param` INT NOT NULL,
  `content` VARCHAR(45) NOT NULL,
  INDEX `id_app_idx` (`id_application` ASC) VISIBLE,
  INDEX `id_param_idx` (`id_param` ASC) VISIBLE,
  CONSTRAINT `id_app`
    FOREIGN KEY (`id_application`)
    REFERENCES `otdel_kadrov`.`RegularApplication` (`idApplication`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_param`
    FOREIGN KEY (`id_param`)
    REFERENCES `otdel_kadrov`.`ApplicationParams` (`idApplicationRequirements`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

insert into roles(id_role, role)
values(1, "Admin"),
		(2, "Worker");
        
insert into employeestatus(id_status, status)
values(5, "Working"),
		(6, "Vaccation"),
        (7, "Fired");
insert into employees(idemployees,name, surname,login,password,id_role,snils,id_status,salary, working_hours, id_position)
values (8,"Kseniia", "Davletshina", "davlet","davlet", 1, 1234,5,100,0, 23),
		(9,"Evgeny", "Babushkin", "davlet","davlet", 2, 5432,6,100,0,24),
		(10,"Roman", "Shikhanov", "davlet","davlet", 2, 1357,6,100,0,24),
		(11,"Denis", "Shitskiy", "davlet","davlet", 2, 2468,5,100,0,23),
        (500,"Denis", "Shitskiy", "davlet","davlet", 2, 5000,7,100,0,24);
        
insert into skills(idskills, skill)
values (12, "C++"),
		(13,"Java"),
        (14,"something"),
        (15,"something else");
        
insert into candidates(idcandidates, name, surname, login, password, snils)
values (16, "Anna", "L", "log", "pas", 123),
		(17, "tanya", "N", "log", "pas", 234),
        (18, "Sasha", "P", "log", "pas", 345),
        (19, "Sergey", "S", "log", "pas", 456);
        
insert into personskills(id_person, id_skill)
values(16,12),
	(16,14),
    (17,13),
    (18,13),
    (18,15);

insert into requirements(idrequirement, requirement)
values(20,"know java"),
	(21,"know c++"),
    (22, "somethimg");

insert into positions(idposition, name, vacancies_amount, working_rate)
values(23, "JavaTeacher", 10, 100),
		(24,"c++ teacher", 5, 100);

insert into positionrequirement(id_position, id_requirement)
values (23,20),
		(24,21),
        (24,22);

insert into statutes(idstatutes, status)
values (25,"Accepted"),
		(26, "On examination"),
        (27, "declined");

insert into jobapplication(idjobapplication,id_candidate,id_status,id_position,id_examiner,description)
values (28,16, 26, 23,9, "blabla"),
		(29,17, 26, 23,9, "blabla"),
        (30,18, 27, 24,10, "blabla"),
        (100,18, 26, 23,10, "blabla"),
        (105,18, 26, 23,10, "blabla");
        
insert into applicationtypes(idapplicationtypes, application_type)
values (31, "Want a vaccation"),
		(32, "Want to quit");

insert into applicationparams(idapplicationrequirements,params)
values (33, "reason"),
		(34, "dates");

insert into paramstype(id_params, id_type)
values (33,31),
		(34,31),
        (33,32);

insert into regularapplication(idapplication, id_employee, id_status, id_examiner, desription, id_app_type)
values (35, 10, 26, 9, "tired", 31),
		(36, 11, 25, 9, "sick and tired of this place", 32);

insert into applicationcontent(id_application, id_param, content)
values (35, 33, "tired"),
		(35, 34, "for a year"),
        (36, 34, "foreever");


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
